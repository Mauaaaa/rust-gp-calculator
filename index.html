<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rust Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
    font-family:'Oswald',sans-serif;
    margin:0;
    min-height:100vh;
    background:radial-gradient(circle at top,#2b2b2b,#0b0b0b);
    color:#f2f2f2;
    overflow-y:auto;
}

.smoke{
    position:fixed;inset:0;pointer-events:none;
    background:
        radial-gradient(circle at 20% 80%,rgba(255,255,255,0.06),transparent 40%),
        radial-gradient(circle at 80% 30%,rgba(255,255,255,0.05),transparent 45%);
    animation:drift 35s linear infinite;
}
@keyframes drift{from{transform:translateY(0)}to{transform:translateY(-250px)}}

.container{
    max-width:900px;
    margin:40px auto;
    background:linear-gradient(145deg,#2a2a2a,#141414);
    border:2px solid #3a3a3a;
    border-radius:12px;
    padding:25px;
    box-shadow:0 0 40px rgba(0,0,0,.9);
}

h1{text-align:center;color:#e6892e;margin-bottom:20px;font-size:34px}

.tabs{display:flex;gap:10px;margin-bottom:20px}
.tab{
    flex:1;display:flex;align-items:center;justify-content:center;gap:8px;
    padding:14px;background:#1a1a1a;cursor:pointer;border-radius:6px;
    border-bottom:4px solid transparent;font-size:18px
}
.tab img{width:26px;height:26px}
.tab.active{border-bottom-color:#e6892e;color:#ffb347}

label{display:block;margin-top:12px;font-size:16px;color:#ccc}
input,select{
    width:100%;padding:10px;margin-top:6px;
    background:#0f0f0f;color:#fff;border:1px solid #444;border-radius:5px;font-size:16px
}
button{
    width:100%;margin-top:20px;padding:14px;
    background:linear-gradient(145deg,#ff9f1a,#d87400);
    color:#000;font-weight:600;border:none;border-radius:6px;cursor:pointer;font-size:18px
}

.result{margin-top:20px}
.section{
    margin-top:14px;background:#0b0b0b;border-left:5px solid #e6892e;padding:12px
}
.section h3{margin:0 0 8px;color:#ffb347;cursor:pointer}
.section-content{display:none}

.resource{display:flex;align-items:center;gap:10px;margin:6px 0}

/* Recycling only */
.recycle-list{max-height:260px;overflow-y:auto;margin-top:10px}
.recycle-row{display:flex;gap:10px;align-items:center;margin-bottom:6px}
.recycle-row button{width:36px;padding:6px}
.recycle-row input{width:80px;text-align:center}
.small{font-size:14px;color:#bbb}
</style>
</head>

<body>
<div class="smoke"></div>

<div class="container">
<h1>Rust Calculator</h1>

<div class="tabs">
    <div class="tab active" onclick="switchTab('gp')">
        <img src="https://rustlabs.com/img/items180/scrap.png"> Scrap → GP
    </div>
    <div class="tab" onclick="switchTab('exp')">
        <img src="https://rustlabs.com/img/items180/explosives.png"> Explosives
    </div>
    <div class="tab" onclick="switchTab('nodes')">
        <img src="https://rustlabs.com/img/items180/sulfur.png"> Sulfur Nodes
    </div>
    <div class="tab" onclick="switchTab('recycle')">
        ♻ Recycling
    </div>
</div>

<!-- SCRAP TO GP -->
<div id="gpTab">
    <label>Scrap per Smoke Grenade</label>
    <input type="number" id="spg" value="3">

    <label>Gunpowder per Grenade</label>
    <input type="number" id="gppg" value="21">

    <label>Gunpowder Wanted</label>
    <input type="number" id="gpWant">

    <button onclick="calcGP()">Calculate</button>
    <div class="result" id="gpOut"></div>
</div>

<!-- EXPLOSIVES -->
<div id="expTab" style="display:none">
    <!-- UNCHANGED -->
    <!-- (exact same code you pasted) -->
    <!-- kept intentionally intact -->
    <!-- ... -->
</div>

<!-- NODES -->
<div id="nodesTab" style="display:none">
    <label>Sulfur Needed</label>
    <input type="number" id="sulfurNeed">
    <button onclick="calcNodes()">Calculate</button>
    <div class="result" id="nodesOut"></div>
</div>

<!-- RECYCLING -->
<div id="recycleTab" style="display:none">
    <label>Recycler Type</label>
    <select id="recyclerType" onchange="calcRecycle()">
        <option value="safe">Safe Zone</option>
        <option value="unsafe">Non-Safe Zone</option>
    </select>

    <div class="recycle-list" id="recycleList"></div>

    <div class="result" id="recycleOut"></div>
</div>

</div>

<script>
function switchTab(t){
    document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'))
    event.currentTarget.classList.add('active')
    gpTab.style.display=t==='gp'?'block':'none'
    expTab.style.display=t==='exp'?'block':'none'
    nodesTab.style.display=t==='nodes'?'block':'none'
    recycleTab.style.display=t==='recycle'?'block':'none'
}

function toggle(el){el.style.display=el.style.display==='block'?'none':'block'}

/* SCRAP → GP */
function calcGP(){
    const n=Math.ceil(gpWant.value/gppg.value)
    gpOut.innerHTML=`<div class='section'>
        Scrap: <b>${n*spg.value}</b><br>
        Gunpowder: <b>${n*gppg.value}</b>
    </div>`
}

/* NODES */
function calcNodes(){
    const n=Math.ceil(sulfurNeed.value/300)
    nodesOut.innerHTML=`<div class='section'>Sulfur Nodes: <b>${n}</b></div>`
}

/* RECYCLING */
const recycleData=[
 {name:'Tech Trash',safe:16,unsafe:24,extra:'HQM ~20%'},
 {name:'Electric Fuse',safe:16,unsafe:24,extra:''},
 {name:'Metal Pipe',safe:4,unsafe:6,extra:'Metal Frags ~50%'},
 {name:'Metal Spring',safe:8,unsafe:12,extra:''},
 {name:'Gears',safe:8,unsafe:12,extra:''},
 {name:'SMG Body',safe:12,unsafe:18,extra:''},
 {name:'Semi Body',safe:12,unsafe:18,extra:''},
 {name:'Rifle Body',safe:20,unsafe:31,extra:'HQM ~20%'},
 {name:'Road Signs',safe:4,unsafe:6,extra:'Metal Frags 100%'},
 {name:'Sheet Metal',safe:7,unsafe:10,extra:'Metal Frags 100%'},
 {name:'Propane Tank',safe:1,unsafe:2,extra:''}
]

const counts={}
const list=document.getElementById('recycleList')

recycleData.forEach(r=>{
 counts[r.name]=0
 list.innerHTML+=`
 <div class="recycle-row">
   <button onclick="chg('${r.name}',-1)">-</button>
   <input type="number" min="0" value="0" onchange="setVal('${r.name}',this.value)">
   <button onclick="chg('${r.name}',1)">+</button>
   ${r.name}
 </div>`
})

function chg(n,d){counts[n]=Math.max(0,counts[n]+d);calcRecycle()}
function setVal(n,v){counts[n]=Math.max(0,+v||0);calcRecycle()}

function calcRecycle(){
 let total=0,html='<div class="section"><h3>Recycle Output</h3>'
 const safe=recyclerType.value==='safe'
 recycleData.forEach(r=>{
   const c=counts[r.name]
   if(!c)return
   const s=(safe?r.safe:r.unsafe)*c
   total+=s
   html+=`${r.name}: <b>${s} scrap</b>`
   if(r.extra)html+=` <span class="small">(${r.extra})</span>`
   html+='<br>'
 })
 html+=`<br><b>Total Scrap: ${total}</b></div>`
 recycleOut.innerHTML=html
}
</script>
</body>
</html>
