<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rust Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}
body{
    font-family:'Oswald',sans-serif;
    margin:0;
    min-height:100vh;
    background:radial-gradient(circle at top,#2b2b2b,#0b0b0b);
    color:#f2f2f2;
    overflow-y:auto;
}

.smoke{
    position:fixed;inset:0;pointer-events:none;
    background:
        radial-gradient(circle at 20% 80%,rgba(255,255,255,0.06),transparent 40%),
        radial-gradient(circle at 80% 30%,rgba(255,255,255,0.05),transparent 45%);
    animation:drift 35s linear infinite;
}
@keyframes drift{from{transform:translateY(0)}to{transform:translateY(-250px)}}

.container{
    max-width:900px;
    margin:40px auto;
    background:linear-gradient(145deg,#2a2a2a,#141414);
    border:2px solid #3a3a3a;
    border-radius:12px;
    padding:25px;
    box-shadow:0 0 40px rgba(0,0,0,.9);
}

h1{text-align:center;color:#e6892e;margin-bottom:20px;font-size:34px}

.tabs{display:flex;gap:10px;margin-bottom:20px}
.tab{
    flex:1;display:flex;align-items:center;justify-content:center;gap:8px;
    padding:14px;background:#1a1a1a;cursor:pointer;border-radius:6px;
    border-bottom:4px solid transparent;font-size:18px
}
.tab.active{border-bottom-color:#e6892e;color:#ffb347}

label{display:block;margin-top:12px;font-size:16px;color:#ccc}
input,select{
    width:100%;padding:10px;margin-top:6px;
    background:#0f0f0f;color:#fff;border:1px solid #444;border-radius:5px;font-size:16px
}
button{
    width:100%;margin-top:20px;padding:14px;
    background:linear-gradient(145deg,#ff9f1a,#d87400);
    color:#000;font-weight:600;border:none;border-radius:6px;cursor:pointer;font-size:18px
}

.result{margin-top:20px}
.section{
    margin-top:14px;background:#0b0b0b;border-left:5px solid #e6892e;padding:12px
}
.section h3{margin:0 0 8px;color:#ffb347;cursor:pointer}
.section-content{display:none}

.resource{display:flex;align-items:center;gap:10px;margin:6px 0}
.resource img{width:34px;height:34px}
</style>
</head>
<body>
<div class="smoke"></div>

<div class="container">
<h1>Rust Calculator</h1>

<div class="tabs">
    <div class="tab active" onclick="switchTab('gp')">üî© Scrap ‚Üí GP</div>
    <div class="tab" onclick="switchTab('exp')">üí£ Explosives</div>
    <div class="tab" onclick="switchTab('nodes')">‚õè Sulfur Nodes</div>
    <div class="tab" onclick="switchTab('recycle')">‚ôª Components</div>
</div>

<!-- SCRAP TO GP -->
<div id="gpTab">
    <label>Scrap per Smoke Grenade</label>
    <input type="number" id="spg" value="3">
    <label>Gunpowder per Grenade</label>
    <input type="number" id="gppg" value="21">
    <label>Gunpowder Wanted</label>
    <input type="number" id="gpWant">
    <button onclick="calcGP()">Calculate</button>
    <div class="result" id="gpOut"></div>
</div>

<!-- EXPLOSIVES -->
<div id="expTab" style="display:none">
    <label>Explosive Type</label>
    <select id="etype">
        <option value="beancan">Beancan Grenade</option>
        <option value="satchel">Satchel</option>
        <option value="c4">C4</option>
        <option value="rocket">Rocket</option>
        <option value="ammo">Explosive Ammo</option>
        <option value="propane">Propane Bomb</option>
    </select>
    <label>Amount Wanted</label>
    <input type="number" id="amt" value="1">
    <label>Gunpowder Crafting</label>
    <select id="gpMethod">
        <option value="inv">Inventory</option>
        <option value="mix">Mixing Table</option>
    </select>
    <button onclick="calcExp()">Calculate</button>
    <div class="result" id="expOut"></div>
</div>

<!-- SULFUR NODES -->
<div id="nodesTab" style="display:none">
    <label>Sulfur Needed</label>
    <input type="number" id="sulfurNeed">
    <button onclick="calcNodes()">Calculate</button>
    <div class="result" id="nodesOut"></div>
</div>

<!-- COMPONENTS RECYCLING -->
<div id="recycleTab" style="display:none">
    <label>Recycler Location</label>
    <select id="recycleZone">
        <option value="safe">Safe Zone</option>
        <option value="unsafe">Outside Safe Zone</option>
    </select>

    <div class="section">
        <h3>Components</h3>
        <div class="resource">
            <button onclick="chg('tech',-1)">-</button>
            <input id="tech" type="number" value="0" style="width:60px">
            <button onclick="chg('tech',1)">+</button>
            Tech Trash
        </div>
        <div class="resource">
            <button onclick="chg('pipe',-1)">-</button>
            <input id="pipe" type="number" value="0" style="width:60px">
            <button onclick="chg('pipe',1)">+</button>
            Metal Pipe
        </div>
        <div class="resource">
            <button onclick="chg('gear',-1)">-</button>
            <input id="gear" type="number" value="0" style="width:60px">
            <button onclick="chg('gear',1)">+</button>
            Gear
        </div>
        <div class="resource">
            <button onclick="chg('fuse',-1)">-</button>
            <input id="fuse" type="number" value="0" style="width:60px">
            <button onclick="chg('fuse',1)">+</button>
            Fuse
        </div>
        <div class="resource">
            <button onclick="chg('beancan',-1)">-</button>
            <input id="beancan" type="number" value="0" style="width:60px">
            <button onclick="chg('beancan',1)">+</button>
            Beancan Grenade
        </div>
        <div class="resource">
            <button onclick="chg('exp',-1)">-</button>
            <input id="exp" type="number" value="0" style="width:60px">
            <button onclick="chg('exp',1)">+</button>
            Explosives
        </div>
        <div class="resource">
            <button onclick="chg('ammo',-1)">-</button>
            <input id="ammo" type="number" value="0" style="width:60px">
            <button onclick="chg('ammo',1)">+</button>
            Explosive Ammo
        </div>
        <div class="resource">
            <button onclick="chg('propane',-1)">-</button>
            <input id="propane" type="number" value="0" style="width:60px">
            <button onclick="chg('propane',1)">+</button>
            Propane Bomb
        </div>
        <button onclick="calcRecycle()">Calculate</button>
        <div class="result" id="recycleOut"></div>
    </div>
</div>

<script>
function switchTab(t){
    document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'))
    event.currentTarget.classList.add('active')
    gpTab.style.display=t==='gp'?'block':'none'
    expTab.style.display=t==='exp'?'block':'none'
    nodesTab.style.display=t==='nodes'?'block':'none'
    recycleTab.style.display=t==='recycle'?'block':'none'
}

function toggle(el){el.style.display=el.style.display==='block'?'none':'block'}

/* SCRAP ‚Üí GP */
function calcGP(){
    const n=Math.ceil(gpWant.value/gppg.value)
    gpOut.innerHTML=`<div class='section'>
        <div class='resource'>Scrap: <b>${n*spg.value}</b></div>
        <div class='resource'>Gunpowder: <b>${n*gppg.value}</b></div>
    </div>`
}

/* EXPLOSIVES */
function calcExp(){
    let gp=0,s=0,c=0,cloth=0,lg=0,metal=0,rope=0,tech=0,pipes=0,prop=0
    let be=0,stash=0,exp=0
    const a=+amt.value

    if(etype.value==='beancan'){be=a;gp=60*a;metal=20*a}
    if(etype.value==='satchel'){be=4*a;stash=a;rope=a;cloth=10*a;gp=60*be;metal=20*be}
    if(etype.value==='c4'){exp=20*a;cloth=5*a;tech=2*a;gp=50*exp;lg=3*exp;s+=10*exp;metal+=10*exp}
    if(etype.value==='rocket'){pipes=2*a;exp=10*a;gp=150*a+50*exp;lg=3*exp;s+=10*exp;metal+=10*exp}
    if(etype.value==='ammo'){gp=10*a;s+=5*a;metal+=5*a}
    if(etype.value==='propane'){prop=a;gp=450*a;lg=20*a}

    const ratio=gpMethod.value==='mix'?{s:2,c:2}:{s:2,c:3}
    s+=gp/10*ratio.s*10
    c+=gp/10*ratio.c*10

    let html=''

    html+=`<div class='section'><h3 onclick="toggle(this.nextElementSibling)">Raw Resources</h3><div class='section-content'>`
    add('Sulfur',s)
    add('Coal',c)
    add('Cloth',cloth)
    add('Tech Trash',tech)
    add('Low Grade',lg)
    add('Metal Frags',metal)
    add('Rope',rope)
    add('Metal Pipes',pipes)
    add('Propane Tank',prop)
    html+='</div></div>'

    html+=`<div class='section'><h3 onclick="toggle(this.nextElementSibling)">Crafted Resources</h3><div class='section-content'>`
    add('Gunpowder',gp)
    add('Explosives',exp)
    add('Beancans',be)
    add('Stashes',stash)
    html+='</div></div>'

    html+=`<div class='section'><h3 onclick="toggle(this.nextElementSibling)">Gunpowder Craft Guide</h3><div class='section-content'>`
    const gpCrafts = Math.ceil(gp/10)
    add('Gunpowder Crafts (x10)',gpCrafts)
    add('Sulfur to use',s)
    add('Coal to use',c)
    html+='</div></div>'

    expOut.innerHTML=html

    function add(name,val){if(val>0)html+=`<div class='resource'>${name}: <b>${Math.ceil(val)}</b></div>`}
}

/* NODES */
function calcNodes(){
    const n=Math.ceil(sulfurNeed.value/300)
    nodesOut.innerHTML=`<div class='section'><div class='resource'>Sulfur Nodes: <b>${n}</b></div></div>`
}

/* COMPONENTS RECYCLING */
function chg(id,v){
    const el=document.getElementById(id)
    el.value=Math.max(0,+el.value+v)
}

function calcRecycle(){
    const zone=document.getElementById('recycleZone').value==='safe'?1:1.5

    const comps=['tech','pipe','gear','fuse','beancan','exp','ammo','propane']

    const yields={
        tech:{scrap:16,hqm:0,sulfur:0},
        pipe:{scrap:4,hqm:0,sulfur:0},
        gear:{scrap:8,hqm:0,sulfur:0},
        fuse:{scrap:16,hqm:0,sulfur:0},
        beancan:{scrap:20,hqm:0,sulfur:0},
        exp:{scrap:25,hqm:0,sulfur:10},
        ammo:{scrap:15,hqm:0,sulfur:5},
        propane:{scrap:50,hqm:0,sulfur:20}
    }

    let total={scrap:0,hqm:0,sulfur:0}

    comps.forEach(id=>{
        const n=+document.getElementById(id).value
        total.scrap+=yields[id].scrap*n*zone
        total.hqm+=yields[id].hqm*n
        total.sulfur+=yields[id].sulfur*n
    })

    let html=`<div class="section"><h3>Recycling Totals</h3>`
    if(total.scrap>0) html+=`<div class="resource">Scrap: <b>${Math.floor(total.scrap)}</b></div>`
    if(total.hqm>0) html+=`<div class="resource">HQM: <b>${Math.floor(total.hqm)}</b></div>`
    if(total.sulfur>0) html+=`<div class="resource">Sulfur: <b>${Math.floor(total.sulfur)}</b></div>`
    html+='</div>'

    recycleOut.innerHTML=html
}
</script>
</body>
</html>
