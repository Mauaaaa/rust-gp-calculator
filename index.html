<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rust Calculator</title>

<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
    --rust:#e6892e;
    --dark:#0b0b0b;
}

body{
    font-family:'Oswald',sans-serif;
    margin:0;
    min-height:100vh;
    background:
        linear-gradient(rgba(0,0,0,.65),rgba(0,0,0,.85)),
        url("https://files.facepunch.com/wiki/files/rust_background.jpg");
    background-size:cover;
    background-position:center;
    color:#f2f2f2;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
}

/* animated smoke */
.smoke{
    position:fixed;
    inset:0;
    pointer-events:none;
    background:
        radial-gradient(circle at 20% 80%, rgba(255,255,255,0.08), transparent 45%),
        radial-gradient(circle at 80% 30%, rgba(255,255,255,0.06), transparent 50%);
    animation: drift 45s linear infinite;
}
@keyframes drift{
    from{transform:translateY(0);}
    to{transform:translateY(-350px);}
}

.container{
    width:95vw;
    max-width:1300px;
    background:linear-gradient(145deg,#2a2a2a,#121212);
    border:3px solid #3a3a3a;
    border-radius:14px;
    padding:32px;
    box-shadow:0 0 70px rgba(0,0,0,0.95);
    position:relative;
    z-index:2;
}

h1{
    text-align:center;
    color:var(--rust);
    font-size:46px;
    margin-bottom:25px;
    letter-spacing:1px;
}

.tabs{
    display:flex;
    gap:12px;
    margin-bottom:25px;
}

.tab{
    flex:1;
    padding:18px;
    background:#111;
    text-align:center;
    cursor:pointer;
    font-size:22px;
    border-bottom:4px solid transparent;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:10px;
}

.tab img{width:28px;height:28px;}

.tab.active{
    border-bottom:4px solid var(--rust);
    color:#ffb347;
}

label{
    margin-top:14px;
    display:block;
    font-size:20px;
}

input,select{
    width:100%;
    padding:12px;
    font-size:20px;
    background:#000;
    color:#fff;
    border:1px solid #444;
    border-radius:6px;
}

button{
    width:100%;
    margin-top:24px;
    padding:16px;
    font-size:22px;
    background:linear-gradient(145deg,#ff9f1a,#d87400);
    border:none;
    border-radius:8px;
    cursor:pointer;
}

.result{
    margin-top:26px;
    background:#000;
    padding:18px;
    border-left:6px solid var(--rust);
}

.section-title{
    color:#ff9f1a;
    font-size:26px;
    margin-top:22px;
    display:flex;
    align-items:center;
    gap:10px;
}

.section-title img{width:30px;height:30px;}

.item{
    display:flex;
    align-items:center;
    gap:14px;
    font-size:21px;
    margin-top:8px;
}

.item img{
    width:38px;
    height:38px;
}
</style>
</head>

<body>
<div class="smoke"></div>

<div class="container">
<h1>Rust Calculator</h1>

<div class="tabs">
    <div class="tab active" onclick="switchTab('gp',this)">
        <img src="https://files.facepunch.com/wiki/files/scrap.png"> Scrap â†’ GP
    </div>
    <div class="tab" onclick="switchTab('explosives',this)">
        <img src="https://files.facepunch.com/wiki/files/explosives.png"> Explosives
    </div>
    <div class="tab" onclick="switchTab('nodes',this)">
        <img src="https://files.facepunch.com/wiki/files/sulfur_ore.png"> Sulfur Nodes
    </div>
</div>

<!-- SCRAP TO GP -->
<div id="gpTab">
    <label>Gunpowder Wanted</label>
    <input type="number" id="gpWant">

    <label>GP per Smoke Grenade</label>
    <select id="gppg">
        <option value="21">Non-Safe Zone (21)</option>
        <option value="14">Safe Zone (14)</option>
    </select>

    <label>Scrap per Smoke Grenade</label>
    <input type="number" id="spg" value="3">

    <button onclick="calcGP()">Calculate</button>
    <div class="result" id="gpResult"></div>
</div>

<!-- EXPLOSIVES -->
<div id="explosivesTab" style="display:none;">
    <label>Explosive Type</label>
    <select id="expType">
        <option value="beancan">Beancan Grenade</option>
        <option value="satchel">Satchel Charge</option>
        <option value="c4">C4</option>
        <option value="rocket">Rocket</option>
        <option value="ammo">Explosive Ammo (2)</option>
        <option value="propane">Propane Bomb</option>
    </select>

    <label>Amount Wanted</label>
    <input type="number" id="expAmt">

    <label>Gunpowder Crafting</label>
    <select id="gpCraft">
        <option value="inv">Inventory (20S / 30C)</option>
        <option value="mix">Mixing Table (20S / 20C)</option>
    </select>

    <button onclick="calcExplosives()">Calculate</button>
    <div class="result" id="expResult"></div>
</div>

<!-- NODES -->
<div id="nodesTab" style="display:none;">
    <label>Total Sulfur Needed</label>
    <input type="number" id="sulfurInput">
    <button onclick="calcNodes()">Calculate Nodes</button>
    <div class="result" id="nodeResult"></div>
</div>
</div>

<script>
const IMG={
 scrap:"https://files.facepunch.com/wiki/files/scrap.png",
 smoke:"https://files.facepunch.com/wiki/files/smoke_grenade.png",
 gp:"https://files.facepunch.com/wiki/files/gunpowder.png",
 sulfur:"https://files.facepunch.com/wiki/files/sulfur.png",
 coal:"https://files.facepunch.com/wiki/files/charcoal.png",
 frags:"https://files.facepunch.com/wiki/files/metal_fragments.png",
 cloth:"https://files.facepunch.com/wiki/files/cloth.png",
 tech:"https://files.facepunch.com/wiki/files/tech_trash.png",
 rope:"https://files.facepunch.com/wiki/files/rope.png",
 lgf:"https://files.facepunch.com/wiki/files/low_grade_fuel.png",
 pipes:"https://files.facepunch.com/wiki/files/metal_pipe.png",
 tank:"https://files.facepunch.com/wiki/files/empty_propane_tank.png",
 node:"https://files.facepunch.com/wiki/files/sulfur_ore.png"
};

const RECIPES={
 beancan:{ gp:60, frags:20 },
 satchel:{ beancan:4, stash:1, rope:1 },
 stash:{ cloth:10 },
 c4:{ explosives:20, cloth:5, tech:2 },
 explosives:{ gp:50, lgf:3, sulfur:10, frags:10 },
 rocket:{ pipes:2, gp:150, explosives:10 },
 ammo:{ gp:20, sulfur:10, frags:10 },
 propane:{ tank:1, gp:450, lgf:20 }
};

function switchTab(tab,el){
 document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
 el.classList.add("active");
 gpTab.style.display = tab==="gp"?"block":"none";
 explosivesTab.style.display = tab==="explosives"?"block":"none";
 nodesTab.style.display = tab==="nodes"?"block":"none";
}

function line(img,name,val){
 if(!val||val<=0) return "";
 return `<div class="item"><img src="${img}">${name}: <b>${val}</b></div>`;
}

function calcGP(){
 const want=+gpWant.value;
 const gren=Math.ceil(want / +gppg.value);
 gpResult.innerHTML=
 line(IMG.smoke,"Smoke Grenades",gren)+
 line(IMG.scrap,"Scrap",gren*+spg.value);
}

function calcNodes(){
 const s=+sulfurInput.value;
 nodeResult.innerHTML=
 line(IMG.sulfur,"Sulfur",s)+
 line(IMG.node,"Sulfur Nodes (300)",Math.ceil(s/300));
}

function calcExplosives(){
 const type=expType.value;
 const amt=+expAmt.value;
 const gpMode=gpCraft.value;

 let raw={sulfur:0,coal:0,cloth:0,tech:0,lgf:0,frags:0,rope:0,pipes:0,tank:0};
 let crafted={gp:0};

 function resolve(item,n){
   const r=RECIPES[item];
   for(const k in r){
     const v=r[k]*n;
     if(k==="gp") crafted.gp+=v;
     else if(RECIPES[k]) resolve(k,v);
     else raw[k]+=v;
   }
 }

 resolve(type,amt);

 const batches=Math.ceil(crafted.gp/10);
 raw.sulfur+=batches*20;
 raw.coal+=batches*(gpMode==="inv"?30:20);

 expResult.innerHTML=
 `<div class="section-title"><img src="${IMG.gp}"> Raw Resources</div>`+
 Object.entries(raw).map(([k,v])=>line(IMG[k],k.toUpperCase(),v)).join("")+
 `<div class="section-title"><img src="${IMG.gp}"> Gunpowder Guidance</div>`+
 line(IMG.sulfur,"Use Sulfur",batches*20)+
 line(IMG.coal,"Use Coal",batches*(gpMode==="inv"?30:20));
}
</script>
</body>
</html>
