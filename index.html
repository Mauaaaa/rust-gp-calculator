<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rust Calculator</title>

<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600&display=swap" rel="stylesheet">

<style>
/* ---------- BASE ---------- */
body {
    font-family: 'Oswald', sans-serif;
    background: radial-gradient(circle at top, #2b2b2b, #0b0b0b);
    color: #f2f2f2;
    margin: 0;
    height: 100vh;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* ---------- SMOKE ---------- */
.smoke {
    position: fixed;
    inset: 0;
    pointer-events: none;
    background:
        radial-gradient(circle at 20% 80%, rgba(255,255,255,0.06), transparent 40%),
        radial-gradient(circle at 80% 30%, rgba(255,255,255,0.05), transparent 45%);
    animation: drift 30s linear infinite;
}

@keyframes drift {
    from { transform: translateY(0); }
    to { transform: translateY(-200px); }
}

/* ---------- CONTAINER ---------- */
.container {
    background: linear-gradient(145deg, #2a2a2a, #141414);
    border: 2px solid #3a3a3a;
    border-radius: 10px;
    width: 420px;
    padding: 20px;
    box-shadow: 0 0 30px rgba(0,0,0,0.9);
    position: relative;
    z-index: 2;
}

/* ---------- HEADER ---------- */
h1 {
    text-align: center;
    color: #e6892e;
    margin: 5px 0 15px;
}

/* ---------- TABS ---------- */
.tabs {
    display: flex;
    margin-bottom: 10px;
}

.tab {
    flex: 1;
    text-align: center;
    padding: 8px;
    background: #1a1a1a;
    cursor: pointer;
    border-bottom: 3px solid transparent;
}

.tab.active {
    border-bottom: 3px solid #e6892e;
    color: #ffb347;
}

/* ---------- SECTIONS ---------- */
.section {
    margin-top: 10px;
}

label {
    display: block;
    margin-top: 8px;
    font-size: 14px;
    color: #ccc;
}

input, select {
    width: 100%;
    padding: 7px;
    margin-top: 4px;
    background: #0f0f0f;
    color: #fff;
    border: 1px solid #444;
    border-radius: 4px;
}

/* ---------- DROPDOWN ---------- */
.dropdown {
    margin-top: 10px;
}

.dropdown-header {
    cursor: pointer;
    color: #ff9f1a;
}

.dropdown-content {
    display: none;
}

/* ---------- BUTTON ---------- */
button {
    width: 100%;
    margin-top: 15px;
    padding: 10px;
    background: linear-gradient(145deg, #ff9f1a, #d87400);
    color: #000;
    font-weight: 600;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

/* ---------- RESULT ---------- */
.result {
    margin-top: 12px;
    background: #0b0b0b;
    border-left: 4px solid #e6892e;
    padding: 10px;
}
</style>
</head>

<body>
<div class="smoke"></div>

<div class="container">
    <h1>Rust Calculator</h1>

    <!-- TABS -->
    <div class="tabs">
        <div class="tab active" onclick="switchTab('gp')">ðŸ”© Scrap â†’ GP</div>
        <div class="tab" onclick="switchTab('c4')">ðŸ’£ Explosives</div>
    </div>

    <!-- GP TAB -->
    <div id="gpTab">
        <label>Mode</label>
        <select id="mode" onchange="switchMode()">
            <option value="gp">I want gunpowder</option>
            <option value="scrap">I have scrap</option>
        </select>

        <!-- ECONOMY DROPDOWN -->
        <div class="dropdown">
            <div class="dropdown-header" onclick="toggleEconomy()">âš™ Economy Settings</div>
            <div class="dropdown-content" id="economy">
                <label>Smoke Grenade Cost (Scrap)</label>
                <input type="number" id="scrapPerGrenade">

                <label>Recycling Zone</label>
                <select id="zone" onchange="updateGP()">
                    <option value="21">Non-Safe (21 GP)</option>
                    <option value="14">Safe (14 GP)</option>
                </select>

                <label>Gunpowder per Grenade</label>
                <input type="number" id="gpPerGrenade">
            </div>
        </div>

        <div id="gpMode">
            <label>Gunpowder Wanted</label>
            <input type="number" id="gpWanted">
        </div>

        <div id="scrapMode" style="display:none;">
            <label>Scrap You Have</label>
            <input type="number" id="scrapHave">
        </div>

        <button onclick="calculateGP()">Calculate</button>
        <div class="result" id="gpResult"></div>
    </div>

    <!-- C4 TAB (placeholder, ready for expansion) -->
    <div id="c4Tab" style="display:none;">
        <p style="color:#ff9f1a;">ðŸ’£ C4 calculator coming next.</p>
        <p>This tab is already wired for full explosive components later.</p>
    </div>
</div>

<script>
/* ---------- STATE ---------- */
function save(id, val){ localStorage.setItem(id,val); }
function load(id, def){ return localStorage.getItem(id) ?? def; }

/* ---------- INIT ---------- */
scrapPerGrenade.value = load("scrapPerGrenade",3);
gpPerGrenade.value = load("gpPerGrenade",21);
zone.value = load("zone",21);

/* ---------- UI ---------- */
function toggleEconomy(){
    const e = document.getElementById("economy");
    e.style.display = e.style.display === "block" ? "none" : "block";
}

function switchMode(){
    gpMode.style.display = mode.value === "gp" ? "block" : "none";
    scrapMode.style.display = mode.value === "scrap" ? "block" : "none";
}

function switchTab(tab){
    document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
    event.target.classList.add("active");
    gpTab.style.display = tab==="gp" ? "block" : "none";
    c4Tab.style.display = tab==="c4" ? "block" : "none";
}

function updateGP(){
    gpPerGrenade.value = zone.value;
    save("zone",zone.value);
}

/* ---------- CALC ---------- */
function calculateGP(){
    save("scrapPerGrenade",scrapPerGrenade.value);
    save("gpPerGrenade",gpPerGrenade.value);

    const gppg = +gpPerGrenade.value;
    const spg = +scrapPerGrenade.value;

    if(mode.value==="gp"){
        const want = +gpWanted.value;
        const n = Math.ceil(want/gppg);
        gpResult.innerHTML = `ðŸ§¨ Grenades: <b>${n}</b><br>ðŸ”© Scrap: <b>${n*spg}</b>`;
    } else {
        const scrap = +scrapHave.value;
        const n = Math.floor(scrap/spg);
        gpResult.innerHTML = `ðŸ§¨ Grenades: <b>${n}</b><br>ðŸ”¥ Gunpowder: <b>${n*gppg}</b>`;
    }
}
</script>

</body>
</html>
