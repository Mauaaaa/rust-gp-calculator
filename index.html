<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Rust Explosives Calculator</title>

<!-- ========== GLOBAL STYLES ========== -->
<style>
:root {
  --bg-dark: #0e0f11;
  --panel: #1b1d21;
  --panel-2: #23262c;
  --rust: #d47c2c;
  --rust-dark: #9a5418;
  --text: #f1f1f1;
  --muted: #b5b5b5;
}

* { box-sizing: border-box; }

html, body {
  margin: 0;
  padding: 0;
  background: var(--bg-dark);
  color: var(--text);
  font-family: "Segoe UI", Tahoma, sans-serif;
  height: 100%;
  overflow-y: auto; /* SCROLL FIX */
}

body {
  background-image:
    linear-gradient(rgba(0,0,0,.85), rgba(0,0,0,.85)),
    url("https://rustlabs.com/img/backgrounds/bg_dark.jpg");
  background-size: cover;
  background-attachment: fixed;
}

/* ========== SMOKE ANIMATION ========== */
.smoke {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  background:
    radial-gradient(circle at 30% 40%, rgba(255,255,255,0.05), transparent 60%),
    radial-gradient(circle at 70% 60%, rgba(255,255,255,0.04), transparent 60%);
  animation: smokeMove 30s linear infinite;
  z-index: 0;
}

@keyframes smokeMove {
  0% { background-position: 0 0, 100% 100%; }
  100% { background-position: 100% 100%, 0 0; }
}

/* ========== LAYOUT ========== */
.container {
  position: relative;
  z-index: 1;
  max-width: 1400px;
  margin: auto;
  padding: 30px;
}

h1 {
  text-align: center;
  font-size: 42px;
  margin-bottom: 20px;
  color: var(--rust);
  text-shadow: 0 0 10px rgba(212,124,44,.4);
}

.tabs {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 25px;
}

.tab {
  background: var(--panel);
  border: 2px solid var(--rust-dark);
  padding: 14px 22px;
  cursor: pointer;
  font-size: 18px;
}

.tab.active {
  background: var(--rust-dark);
}

.panel {
  display: none;
  background: var(--panel);
  padding: 25px;
  border: 2px solid var(--rust-dark);
}

.panel.active { display: block; }

label {
  display: block;
  margin: 12px 0 6px;
  font-size: 18px;
}

input, select, button {
  width: 100%;
  padding: 12px;
  font-size: 18px;
  background: var(--panel-2);
  color: var(--text);
  border: 1px solid #444;
}

button {
  background: var(--rust);
  border: none;
  cursor: pointer;
  margin-top: 15px;
}

button:hover { background: #e08b3a; }

.results {
  margin-top: 25px;
}

.dropdown {
  margin-top: 15px;
}

.dropdown button {
  background: var(--panel-2);
}

.dropdown-content {
  display: none;
  padding: 15px;
  background: #141519;
}

.dropdown.open .dropdown-content { display: block; }

.resource {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 6px 0;
  font-size: 18px;
}

.resource img {
  width: 36px;
  height: 36px;
}
</style>
</head>
<body>
<div class="smoke"></div>

<div class="container">
  <h1>Rust Explosives Calculator</h1>

  <!-- ========== TABS ========== -->
  <div class="tabs">
    <div class="tab active" onclick="showTab('explosives')">Explosives</div>
    <div class="tab" onclick="showTab('scrap')">Scrap â†’ Gunpowder</div>
    <div class="tab" onclick="showTab('nodes')">Sulfur Nodes</div>
  </div>

  <!-- ========== EXPLOSIVES PANEL ========== -->
  <div id="explosives" class="panel active">
    <label>Item</label>
    <select id="item">
      <option value="satchel">Satchel Charge</option>
      <option value="c4">C4</option>
      <option value="rocket">Rocket</option>
      <option value="beancan">Beancan Grenade</option>
      <option value="ammo">Explosive Ammo</option>
      <option value="propane">Propane Bomb</option>
    </select>

    <label>Amount</label>
    <input id="amount" type="number" value="1" min="1" />

    <label>Gunpowder Crafting</label>
    <select id="gpCraft">
      <option value="mix">Mixing Table (20S / 20C)</option>
      <option value="inv">Inventory (20S / 30C)</option>
    </select>

    <button onclick="calculate()">Calculate</button>

    <div id="results" class="results"></div>
  </div>

  <!-- ========== SCRAP PANEL ========== -->
  <div id="scrap" class="panel">
    <label>Scrap Amount</label>
    <input id="scrapInput" type="number" value="0" />
    <button onclick="calcScrap()">Calculate Gunpowder</button>
    <div id="scrapResult" class="results"></div>
  </div>

  <!-- ========== NODES PANEL ========== -->
  <div id="nodes" class="panel">
    <div class="resource">
      <img src="https://rustlabs.com/img/items180/sulfur.180.png" />
      300 Sulfur per node
    </div>
  </div>
</div>

<!-- ========== LOGIC ========== -->
<script>
function showTab(id) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  event.target.classList.add('active');
}

const IMG = {
  sulfur: "https://rustlabs.com/img/items180/sulfur.180.png",
  coal: "https://rustlabs.com/img/items180/coal.180.png",
  gp: "https://rustlabs.com/img/items180/gunpowder.180.png",
  metal: "https://rustlabs.com/img/items180/metal.fragments.180.png",
  cloth: "https://rustlabs.com/img/items180/cloth.180.png",
  rope: "https://rustlabs.com/img/items180/rope.180.png",
  lgf: "https://rustlabs.com/img/items180/low.grade.fuel.180.png",
  tech: "https://rustlabs.com/img/items180/tech.trash.180.png",
  pipe: "https://rustlabs.com/img/items180/metal.pipe.180.png",
  scrap: "https://rustlabs.com/img/items180/scrap.180.png"
};

function resRow(name, amt, img) {
  if (amt <= 0) return "";
  return `<div class='resource'><img src='${img}'>${amt} ${name}</div>`;
}

function calculate() {
  const item = document.getElementById('item').value;
  const amt = +document.getElementById('amount').value;
  const mix = document.getElementById('gpCraft').value === 'mix';

  let gp=0,s=0,c=0,metal=0,cloth=0,rope=0,lgf=0,tech=0,pipe=0;

  if(item==='beancan'){ gp=60*amt; metal=20*amt; }
  if(item==='satchel'){ gp=240*amt; metal=80*amt; cloth=40*amt; rope=amt; }
  if(item==='c4'){ gp=1000*amt; lgf=60*amt; s=200*amt; metal=200*amt; cloth=5*amt; tech=2*amt; }
  if(item==='rocket'){ gp=150*amt; pipe=2*amt; s=100*amt; metal=100*amt; }
  if(item==='ammo'){ gp=10*amt; metal=10*amt; s=10*amt; }
  if(item==='propane'){ gp=450*amt; lgf=20*amt; }

  const sulfurPer10 = 20;
  const coalPer10 = mix ? 20 : 30;
  const batches = Math.ceil(gp / 10);
  s += batches * sulfurPer10;
  c += batches * coalPer10;

  document.getElementById('results').innerHTML = `
    <div class='dropdown open'>
      <button onclick="this.parentElement.classList.toggle('open')">Raw Resources</button>
      <div class='dropdown-content'>
        ${resRow('Sulfur',s,IMG.sulfur)}
        ${resRow('Coal',c,IMG.coal)}
        ${resRow('Metal Frags',metal,IMG.metal)}
        ${resRow('Cloth',cloth,IMG.cloth)}
        ${resRow('Rope',rope,IMG.rope)}
        ${resRow('Low Grade',lgf,IMG.lgf)}
        ${resRow('Tech Trash',tech,IMG.tech)}
        ${resRow('Metal Pipes',pipe,IMG.pipe)}
      </div>
    </div>
  `;
}

function calcScrap(){
  const scrap = +document.getElementById('scrapInput').value;
  const gp = Math.floor(scrap/10)*20;
  document.getElementById('scrapResult').innerHTML =
    resRow('Gunpowder',gp,IMG.gp)+resRow('Scrap Used',scrap,IMG.scrap);
}
</script>
</body>
</html>
